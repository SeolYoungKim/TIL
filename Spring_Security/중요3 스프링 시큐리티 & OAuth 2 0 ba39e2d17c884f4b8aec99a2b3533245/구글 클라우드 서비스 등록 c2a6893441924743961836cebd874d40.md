# 구글 클라우드 서비스 등록

## 구글 서비스 등록

---

구글 서비스에 신규 서비스 생성

여기서 발급된 인증 정보(clientId & clientSecret) → 로그인 기능과 소셜 서비스 기능 사용 

⇒ 반드시 인증 정보를 발급받고 시작하자.

1. [https://console.cloud.google.com](https://console.cloud.google.com) 으로 이동 (구글 클라우드 플랫폼)
2. 새 프로젝트 생성
    
    ![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled.png)
    
    ![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%201.png)
    
    ![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%202.png)
    
3. 프로젝트 선택 후 메뉴 탭 클릭 → API 및 서비스 카테고리로 이동
    
    ![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%203.png)
    
4. 사용자 인증 정보 → CREATE CREDENTIALS 클릭 → OAuth 클라이언트 ID 클릭
    
    ![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%204.png)
    
5. OAuth 동의 화면 (책이랑 좀 많이 다름)

![앱 이름과 이메일 이름 입력](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%205.png)

앱 이름과 이메일 이름 입력

![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%206.png)

- 나머지는 입력하지 않고, 저장 후 계속을 눌러서 진행
1. 범위

![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%207.png)

![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%208.png)

- 범위 추가 또는 삭제 클릭 → email, profile, openid 체크 → 업데이트 → 저장 후 게속
1. Oauth 동의 화면을 구성하고, 다시 사용자 인증 정보로 들어간다.
    
    ![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%209.png)
    
2. 웹 애플리케이션 → 프로젝트 이름 설정 

![Untitled](%E1%84%80%E1%85%AE%E1%84%80%E1%85%B3%E1%86%AF%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%AE%E1%84%83%E1%85%B3%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20c2a6893441924743961836cebd874d40/Untitled%2010.png)

1. 승인된 리디렉션 URI 설정 → 만들기 버튼을 눌러서 생성
    - http://localhost:8080/login/oauth2/code/google
2. client id와 pw가 팝업으로 뜨는데, 이를 저장해두자.

### 승인된 리디렉션 URI

- 서비스에서 파라미터로 인증 정보를 주었을 때, 인증이 성공하면 구글에서 리다이렉트 할 URI
- 스프링 부트 2 버전의 시큐리티
    - 기본적으로 `{도메인}/login/oauth2/code/{소셜서비스코드}`로 리다이렉트 URL을 지원함
- 사용자가 별도로 리다이렉트 URL을 지원하는 Controller를 만들 필요가 없다.
    - 스프링 시큐리티에서 이미 구현 해놓은 상태
- 현재는 개발 단계이므로 `http://localhost:8080/login/oauth2/code/google`로만 등록
- AWS 서버에 배포하게 될 시, localhost 외에 추가로 주소를 추가해야 함.